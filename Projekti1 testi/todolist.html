<!DOCTYPE html>
<html lang="fi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Todos</title>
  <style>
    body {
      font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
      background: #f5f5f5;
      color: #4d4d4d;
      display: flex;
      justify-content: center;
      margin-top: 50px;
    }

    .todoapp {
      background: white;
      box-shadow: 0 2px 4px rgba(0,0,0,0.2);
      width: 400px;
      border-radius: 4px;
      padding: 1rem;
    }

    h1 {
      text-align: center;
      color: #b83f45;
      font-size: 4rem;
      font-weight: 100;
      margin-top: 0;
    }

    .new-todo {
      width: 100%;
      padding: 10px;
      font-size: 1.2rem;
      border: none;
      border-bottom: 1px solid #ddd;
      outline: none;
      font-style: italic;
      color: #777;
    }

    .todo-list {
      list-style: none;
      padding: 0;
      margin: 0;
    }

    .todo-list li {
      display: flex;
      align-items: center;
      padding: 10px 0;
      border-bottom: 1px solid #eee;
    }

    .todo-list li.completed span {
      text-decoration: line-through;
      color: #999;
    }

    .todo-list button {
      margin-left: auto;
      border: none;
      background: transparent;
      color: #cc9a9a;
      font-size: 1.5rem;
      cursor: pointer;
    }

    .todo-list button:hover {
      color: #af5b5e;
    }

    .footer {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-top: 10px;
      font-size: 0.9rem;
    }

    .filters button {
      margin-left: 5px;
      border: 1px solid transparent;
      background: none;
      cursor: pointer;
      padding: 2px 6px;
      border-radius: 3px;
    }

    .filters .selected {
      border: 1px solid #b83f45;
      color: #b83f45;
    }
  </style>
</head>
<body>
  <section class="todoapp">
    <h1>todos</h1>
    <input id="new-todo" class="new-todo" placeholder="What needs to be done?" autofocus>
    <ul id="todo-list" class="todo-list"></ul>
    <footer class="footer">
      <span id="todo-count"></span>
      <div class="filters">
        <button id="filter-all" class="selected">All</button>
        <button id="filter-active">Active</button>
        <button id="filter-completed">Completed</button>
      </div>
    </footer>
  </section>

  <script>
    const newTodoInput = document.getElementById('new-todo');
    const todoList = document.getElementById('todo-list');
    const todoCount = document.getElementById('todo-count');
    const filterButtons = document.querySelectorAll('.filters button');

    let todos = [];
    let filter = 'all';

    newTodoInput.addEventListener('keypress', (e) => {
      if (e.key === 'Enter' && e.target.value.trim() !== '') {
        todos.push({ text: e.target.value.trim(), completed: false });
        e.target.value = '';
        render();
      }
    });

    function toggleComplete(index) {
      todos[index].completed = !todos[index].completed;
      render();
    }

    function deleteTodo(index) {
      todos.splice(index, 1);
      render();
    }

    function render() {
      todoList.innerHTML = '';

      const filtered = todos.filter(todo =>
        filter === 'active' ? !todo.completed :
        filter === 'completed' ? todo.completed : true
      );

      filtered.forEach((todo, i) => {
        const li = document.createElement('li');
        if (todo.completed) li.classList.add('completed');

        li.innerHTML = `
          <input type="checkbox" ${todo.completed ? 'checked' : ''} onclick="toggleComplete(${i})">
          <span>${todo.text}</span>
          <button onclick="deleteTodo(${i})">&times;</button>
        `;
        todoList.appendChild(li);
      });

      const activeCount = todos.filter(t => !t.completed).length;
      todoCount.textContent = `${activeCount} item${activeCount !== 1 ? 's' : ''} left`;
    }

    filterButtons.forEach(btn => {
      btn.addEventListener('click', () => {
        filterButtons.forEach(b => b.classList.remove('selected'));
        btn.classList.add('selected');
        filter = btn.id.replace('filter-', '');
        render();
      });
    });

    render();
  </script>
</body>
</html>
